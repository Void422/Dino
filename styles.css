:root{
  --ink:#111; --muted:#666; --line:#e6e6e6; --bg:#fafafa; --card:#fff;
  --pad:clamp(12px,2vw,18px);
  --radius:14px; --radius-sm:10px;
  --touch:44px;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;color:var(--ink);background:#fff}

/* top */
.topbar{
  position:sticky;top:0;z-index:10;
  display:flex;gap:12px;align-items:center;justify-content:space-between;
  padding:env(safe-area-inset-top) var(--pad) var(--pad);
  border-bottom:1px solid var(--line);background:#fffcc0;
  background:#fff; backdrop-filter:saturate(1.2) blur(6px);
}
.brand{font-weight:700;letter-spacing:.2px}
.toolbar{display:flex;gap:10px;flex-wrap:wrap}
.picker{display:flex;gap:6px;align-items:center}
.picker span{font-size:12px;color:var(--muted)}
select{
  min-height:var(--touch);
  padding:8px 12px;border:1px solid var(--line);border-radius:var(--radius-sm);
  background:var(--card);font-size:14px
}

/* main */
.wrap{max-width:980px;margin:0 auto;padding:var(--pad)}
.stage{
  display:grid;place-items:center;background:var(--bg);
  border:1px solid var(--line);border-radius:var(--radius);padding:clamp(10px,3vw,18px);
}
canvas{width:min(640px,100%);height:auto;image-rendering:crisp-edges}

.panel{margin-top:clamp(12px,2.5vw,20px);background:var(--card);border:1px solid var(--line);border-radius:var(--radius);padding:var(--pad)}
.panel-head{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:10px}
.panel h3{margin:0;font-size:clamp(16px,2.2vw,18px)}
.count{font-size:12px;color:var(--muted)}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(min(200px,48vw),1fr));
  gap:10px;
}
.swatch{
  display:flex;gap:10px;align-items:center;
  border:1px solid var(--line);border-radius:var(--radius-sm);
  background:var(--card);padding:10px;
  min-height:var(--touch);cursor:pointer;
  touch-action:manipulation;-webkit-tap-highlight-color:transparent;
}
.swatch:active{transform:scale(.99)}
.swatch:hover{border-color:#bdbdbd}
.s-off{opacity:.45;cursor:not-allowed;background:#f6f6f6}
.dot{width:32px;height:32px;border-radius:10px;border:1px solid #ddd;flex:0 0 32px}
.meta{font-size:12px;line-height:1.25}
.meta .name{font-weight:600}

/* desktop tweaks */
@media (min-width:900px){
  .grid{grid-template-columns:repeat(auto-fill,minmax(220px,1fr))}
  .dot{width:28px;height:28px;border-radius:8px}
}

/* small phones */
@media (max-width:420px){
  .toolbar{gap:8px}
  select{font-size:13px}
  .grid{grid-template-columns:repeat(2,1fr)}
}
